---

---

<div class="terminal-container reveal">
    <div class="terminal-header">
        <div class="terminal-controls">
            <span class="control close"></span>
            <span class="control minimize"></span>
            <span class="control expand"></span>
        </div>
        <div class="terminal-title">bash — automation_vault</div>
    </div>
    <div class="terminal-body" id="terminal-body">
        <div class="terminal-line">
            <span class="prompt">user@gabor:~$</span>
            <span class="typed-command" id="initial-command"></span>
        </div>
        <div id="terminal-output"></div>
    </div>
</div>

<style>
    .terminal-container {
        width: 100%;
        max-width: 500px;
        background: rgba(13, 17, 23, 0.8);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        box-shadow:
            0 20px 50px rgba(0, 0, 0, 0.5),
            0 0 20px rgba(56, 189, 248, 0.1);
        backdrop-filter: blur(10px);
        overflow: hidden;
        font-family: var(--font-mono);
        margin: 0 auto;
        transform: perspective(1000px) rotateY(-5deg);
        transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .terminal-container:hover {
        transform: perspective(1000px) rotateY(0deg) translateY(-5px);
        border-color: rgba(56, 189, 248, 0.3);
    }

    .terminal-header {
        background: rgba(255, 255, 255, 0.05);
        padding: 0.75rem 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .terminal-controls {
        position: absolute;
        left: 1rem;
        display: flex;
        gap: 0.5rem;
    }

    .control {
        width: 12px;
        height: 12px;
        border-radius: 50%;
    }

    .close {
        background: #ff5f56;
    }
    .minimize {
        background: #ffbd2e;
    }
    .expand {
        background: #27c93f;
    }

    .terminal-title {
        font-size: 0.75rem;
        color: var(--text-muted);
        letter-spacing: 0.05em;
    }

    .terminal-body {
        padding: 1.5rem;
        height: 320px; /* Fixed height to prevent layout shifts */
        overflow-y: auto; /* Allow content to grow internally */
        font-size: 0.9rem;
        line-height: 1.6;
        color: #e6edf3;
        scrollbar-width: none; /* Hide scrollbar for a cleaner simulation */
    }

    .terminal-body::-webkit-scrollbar {
        display: none; /* Hide scrollbar for Chrome/Safari */
    }

    .prompt {
        color: var(--accent-emerald);
        margin-right: 0.75rem;
        font-weight: 600;
    }

    .command {
        color: var(--accent-blue);
    }

    .output {
        color: var(--text-secondary);
        margin-bottom: 1rem;
        display: block;
        animation: fadeIn 0.3s ease-out;
    }

    .keyword {
        color: #ff7b72;
    }
    .string {
        color: #a5d6ff;
    }
    .function {
        color: #d2a8ff;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(5px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @media (max-width: 768px) {
        .terminal-container {
            transform: none;
            max-width: 100%;
        }
    }
</style>

<script>
    function initTerminal() {
        const commandsEN = [
            {
                input: "whoami",
                output: "Gabor Flandorffer\nSenior Automation Architect\n11+ years of experience | Medellín, Colombia",
            },
            {
                input: "docker compose up -d production",
                output: "Creating network 'prod-net'...\nCreating container 'api-v2' (Django)...\nCreating container 'bot-farm' (Puppeteer)...\n[SUCCESS] Production systems online.",
            },
            {
                input: "python analyze_roi.py --project scale-up",
                output: "[INFO] Analyzing ROI for smart pipelines...\n[CALCULATED] Total savings: $12.4M/year via automated workflows.\n[REPORT] High business impact confirmed.",
            },
            {
                input: "ls certifications/",
                output: "Google_IT_Automation.pdf\nReact_Advanced.cert\nSQL_Expert.cert\nPython_Specialist.cert",
            },
        ];

        const commandsES = [
            {
                input: "whoami",
                output: "Gabor Flandorffer\nArquitecto Senior de Automatización\n11+ años de experiencia | Medellín, Colombia",
            },
            {
                input: "docker compose up -d produccion",
                output: "Creando red 'prod-net'...\nCreando contenedor 'api-v2' (Django)...\nCreando contenedor 'bot-farm' (Puppeteer)...\n[ÉXITO] Sistemas de producción en línea.",
            },
            {
                input: "python analizar_roi.py --proyecto escalar",
                output: "[INFO] Analizando ROI de pipelines inteligentes...\n[CALCULADO] Ahorro total: $12.4M/año vía flujos automatizados.\n[REPORTE] Alto impacto de negocio confirmado.",
            },
            {
                input: "ls certificaciones/",
                output: "Google_IT_Automatización.pdf\nReact_Avanzado.cert\nSQL_Experto.cert\nPython_Especialista.cert",
            },
        ];

        let currentCmd = 0;
        let isRunning = false;
        let abortController: AbortController | null = null;
        const initialCmdEl = document.getElementById("initial-command");
        const outputEl = document.getElementById("terminal-output");

        function getCommands() {
            const lang = localStorage.getItem("preferred-lang") || "en";
            return lang === "es" ? commandsES : commandsEN;
        }

        function sleep(ms: number, signal?: AbortSignal): Promise<void> {
            return new Promise((resolve, reject) => {
                const timer = setTimeout(resolve, ms);
                if (signal) {
                    signal.addEventListener("abort", () => {
                        clearTimeout(timer);
                        reject(new DOMException("Aborted", "AbortError"));
                    });
                }
            });
        }

        async function typeEffect(
            text: string,
            element: HTMLElement,
            signal: AbortSignal,
        ) {
            for (let i = 0; i <= text.length; i++) {
                signal.throwIfAborted();
                element.textContent = text.substring(0, i);
                await sleep(50, signal);
            }
        }

        async function runTerminal() {
            if (!initialCmdEl || !outputEl || isRunning) return;
            isRunning = true;

            // Clean up previous run
            if (abortController) abortController.abort();
            abortController = new AbortController();
            const signal = abortController.signal;

            try {
                while (true) {
                    signal.throwIfAborted();
                    const commands = getCommands();
                    const cmd = commands[currentCmd % commands.length];

                    await typeEffect(cmd.input, initialCmdEl, signal);
                    await sleep(600, signal);

                    const outDiv = document.createElement("div");
                    outDiv.className = "output";
                    outDiv.innerText = cmd.output;
                    outputEl.appendChild(outDiv);

                    const terminalBody =
                        document.getElementById("terminal-body");
                    if (terminalBody) {
                        terminalBody.scrollTop = terminalBody.scrollHeight;
                    }

                    await sleep(3000, signal);

                    if (outputEl.children.length > 2) {
                        outputEl.innerHTML = "";
                    }

                    initialCmdEl.textContent = "";
                    currentCmd = (currentCmd + 1) % commands.length;
                }
            } catch (e: any) {
                if (e.name === "AbortError") {
                    // Language changed — clean up and let restart happen
                    isRunning = false;
                    return;
                }
                throw e;
            }
        }

        // Restart terminal on language change
        window.addEventListener("langChanged", () => {
            if (abortController) abortController.abort();
            isRunning = false;
            currentCmd = 0;
            if (initialCmdEl) initialCmdEl.textContent = "";
            if (outputEl) outputEl.innerHTML = "";
            setTimeout(() => runTerminal(), 100);
        });

        const observer = new IntersectionObserver(
            (entries) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        runTerminal();
                        observer.unobserve(entry.target);
                    }
                });
            },
            { threshold: 0.2 },
        );

        const terminal = document.querySelector(".terminal-container");
        if (terminal) observer.observe(terminal);
    }

    initTerminal();
</script>
